Full rewrite to kotlin.
New UI
Combined functions for checks.
